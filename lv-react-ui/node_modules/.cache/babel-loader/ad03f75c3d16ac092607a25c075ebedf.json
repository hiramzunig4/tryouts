{"ast":null,"code":"var _jsxFileName = \"/home/hiram/github/hiram-repos/tryouts/lv-react-ui/src/Database.js\";\nimport React, { useState, useRef } from 'react';\nimport api from \"./api\";\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport Alert from 'react-bootstrap/Alert';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Navbar from 'react-bootstrap/Navbar';\nimport FormControl from 'react-bootstrap/FormControl';\n\nfunction Database(props) {\n  //Response from yeico appliance\n  const [responseString, setResponseString] = React.useState(\"\"); //Alerts\n\n  const [isValid, setIsValid] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [selectedFile, setSelectedFile] = useState();\n  const [isFilePicked, setIsFilePicked] = useState(false);\n\n  function uploadFile(filename) {\n    console.log(\"Apoco si la envio asi na mas el nombre se envia?\");\n    console.log(filename[0]);\n    api.stopApp(function (res) {\n      console.log(res);\n    }, props.device, \"nerves\", props.pass);\n    api.uploadFile(function (res) {\n      console.log(res);\n\n      if (res.result === \"ok\") {\n        setResponseString(`File Uploaded`);\n        setIsValid(true);\n        setTimeout(() => {\n          setIsValid(false);\n        }, 3000);\n      } else {\n        setResponseString(`File Upload Fail`);\n        setIsError(true);\n        setTimeout(() => {\n          setIsError(false);\n        }, 3000);\n      }\n    }, props.device, \"nerves\", props.pass, filename[0]);\n    api.startApp(function (res) {\n      console.log(res);\n    }, props.device, \"nerves\", props.pass);\n  }\n\n  function downloadFile() {\n    api.stopApp(function (res) {\n      console.log(res);\n    }, props.device, \"nerves\", props.pass);\n    api.downloadFile(props.device, \"nerves\", props.pass, props.mac);\n    api.startApp(function (res) {\n      console.log(res);\n    }, props.device, \"nerves\", props.pass);\n  }\n\n  const changeHandler = event => {\n    setSelectedFile(event.target.files[0]);\n    setIsSelected(true);\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, Object.assign({}, props, {\n    size: \"lg\",\n    backdrop: \"static\",\n    \"aria-labelledby\": \"contained-modal-title-vcenter\",\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    id: \"contained-modal-title-vcenter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Database\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Navbar.Collapse, {\n    as: Col,\n    className: \"justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    show: isValid,\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, responseString), /*#__PURE__*/React.createElement(Alert, {\n    show: isError,\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, responseString), /*#__PURE__*/React.createElement(FormControl, {\n    type: \"file\",\n    title: \" \",\n    onChange: e => uploadFile(e.target.files),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    onChange: changeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmission,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, \"Submit\"))))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"dark\",\n    onClick: downloadFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"Backup\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"dark\",\n    onClick: props.onHide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, \"Close\")));\n}\n\nexport default Database;","map":{"version":3,"sources":["/home/hiram/github/hiram-repos/tryouts/lv-react-ui/src/Database.js"],"names":["React","useState","useRef","api","Col","Form","Alert","Modal","Button","Navbar","FormControl","Database","props","responseString","setResponseString","isValid","setIsValid","isError","setIsError","selectedFile","setSelectedFile","isFilePicked","setIsFilePicked","uploadFile","filename","console","log","stopApp","res","device","pass","result","setTimeout","startApp","downloadFile","mac","changeHandler","event","target","files","setIsSelected","e","handleSubmission","onHide"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react'\n\nimport api from \"./api\"\n\nimport Col from 'react-bootstrap/Col'\nimport Form from 'react-bootstrap/Form'\nimport Alert from 'react-bootstrap/Alert'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport Navbar from 'react-bootstrap/Navbar'\nimport FormControl from 'react-bootstrap/FormControl'\n\nfunction Database(props) {\n\n  //Response from yeico appliance\n  const [responseString, setResponseString] = React.useState(\"\")\n\n  //Alerts\n  const [isValid, setIsValid] = useState(false);\n  const [isError, setIsError] = useState(false);\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [isFilePicked, setIsFilePicked] = useState(false);\n\n  function uploadFile(filename) {\n    console.log(\"Apoco si la envio asi na mas el nombre se envia?\")\n    console.log(filename[0])\n    api.stopApp(function (res) {\n      console.log(res)\n    }, props.device, \"nerves\", props.pass)\n    api.uploadFile(function (res) {\n      console.log(res)\n      if (res.result === \"ok\") {\n        setResponseString(`File Uploaded`)\n        setIsValid(true)\n        setTimeout(() => {\n          setIsValid(false)\n        }, 3000);\n      }\n      else {\n        setResponseString(`File Upload Fail`)\n        setIsError(true)\n        setTimeout(() => {\n          setIsError(false)\n        }, 3000);\n      }\n    }, props.device, \"nerves\", props.pass, filename[0])\n    api.startApp(function (res) {\n      console.log(res)\n    }, props.device, \"nerves\", props.pass)\n  }\n\n  function downloadFile() {\n    api.stopApp(function (res) {\n      console.log(res)\n    }, props.device, \"nerves\", props.pass)\n    api.downloadFile(props.device, \"nerves\", props.pass, props.mac)\n    api.startApp(function (res) {\n      console.log(res)\n    }, props.device, \"nerves\", props.pass)\n  }\n\n  const changeHandler = (event) => {\n    setSelectedFile(event.target.files[0]);\n    setIsSelected(true);\n  };\n\n\n  return (\n    <Modal\n      {...props}\n      size=\"lg\"\n      backdrop=\"static\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">\n          Database\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Navbar >\n          <Navbar.Collapse as={Col} className=\"justify-content-center\">\n            <Form>\n              <Alert show={isValid} variant=\"success\">\n                {responseString}\n              </Alert>\n              <Alert show={isError} variant=\"danger\">\n                {responseString}\n              </Alert>\n              <FormControl type=\"file\" title=\" \" onChange={(e) => uploadFile(e.target.files)} />\n            </Form>\n\n            <input type=\"file\" name=\"file\" onChange={changeHandler} />\n            <div>\n              <button onClick={handleSubmission}>Submit</button>\n            </div>\n\n          </Navbar.Collapse>\n        </Navbar>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"dark\" onClick={downloadFile}>Backup</Button>\n        <Button variant=\"dark\" onClick={props.onHide}>Close</Button>\n      </Modal.Footer>\n    </Modal >\n  );\n}\n\nexport default Database;"]},"metadata":{},"sourceType":"module"}