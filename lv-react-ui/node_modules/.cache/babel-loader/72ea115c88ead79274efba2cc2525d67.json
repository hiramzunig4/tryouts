{"ast":null,"code":"var _jsxFileName = \"/home/hiram/github/hiram-repos/tryouts/lv-react-ui/src/Database.js\";\nimport React, { useState, useRef } from 'react';\nimport api from \"./api\";\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport Alert from 'react-bootstrap/Alert';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Navbar from 'react-bootstrap/Navbar';\nimport FormControl from 'react-bootstrap/FormControl';\n\nfunction Database(props) {\n  //Response from yeico appliance\n  const [responseString, setResponseString] = React.useState(\"\"); //Alerts\n\n  const [isValid, setIsValid] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const inputRef = useRef < HTMLInputElement > null;\n\n  function uploadFile(filename) {\n    console.log(\"Apoco si la envio asi na mas el nombre se envia?\");\n    console.log(filename[0]);\n    api.stopApp(function (res) {\n      console.log(res);\n    }, props.device, \"nerves\", props.pass);\n    api.uploadFile(function (res) {\n      console.log(res);\n\n      if (res.result === \"ok\") {\n        setResponseString(`File Uploaded`);\n        setIsValid(true);\n        setTimeout(() => {\n          setIsValid(false);\n        }, 3000);\n      } else {\n        setResponseString(`File Upload Fail`);\n        setIsError(true);\n        setTimeout(() => {\n          setIsError(false);\n        }, 3000);\n      }\n    }, props.device, \"nerves\", props.pass, filename[0]);\n    api.startApp(function (res) {\n      console.log(res);\n    }, props.device, \"nerves\", props.pass);\n  }\n\n  function downloadFile() {\n    api.stopApp(function (res) {\n      console.log(res);\n    }, props.device, \"nerves\", props.pass);\n    api.downloadFile(props.device, \"nerves\", props.pass, props.mac);\n    api.startApp(function (res) {\n      console.log(res);\n    }, props.device, \"nerves\", props.pass);\n  }\n\n  function handleUpload(event) {\n    var _inputRef$current;\n\n    (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.click();\n  }\n\n  return /*#__PURE__*/React.createElement(Modal, Object.assign({}, props, {\n    size: \"lg\",\n    backdrop: \"static\",\n    \"aria-labelledby\": \"contained-modal-title-vcenter\",\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    id: \"contained-modal-title-vcenter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, \"Database\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Navbar.Collapse, {\n    as: Col,\n    className: \"justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    show: isValid,\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, responseString), /*#__PURE__*/React.createElement(Alert, {\n    show: isError,\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, responseString), /*#__PURE__*/React.createElement(FormControl, {\n    type: \"file\",\n    title: \" \",\n    onChange: e => uploadFile(e.target.files),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"mx-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, \"Choose file: \"), /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputRef,\n    className: \"d-none\",\n    type: \"file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpload,\n    className: \"btn btn-outline-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, \"Upload\")))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"dark\",\n    onClick: downloadFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, \"Backup\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"dark\",\n    onClick: props.onHide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, \"Close\")));\n}\n\nexport default Database;","map":{"version":3,"sources":["/home/hiram/github/hiram-repos/tryouts/lv-react-ui/src/Database.js"],"names":["React","useState","useRef","api","Col","Form","Alert","Modal","Button","Navbar","FormControl","Database","props","responseString","setResponseString","isValid","setIsValid","isError","setIsError","inputRef","HTMLInputElement","uploadFile","filename","console","log","stopApp","res","device","pass","result","setTimeout","startApp","downloadFile","mac","handleUpload","event","current","click","e","target","files","onHide"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react'\n\nimport api from \"./api\"\n\nimport Col from 'react-bootstrap/Col'\nimport Form from 'react-bootstrap/Form'\nimport Alert from 'react-bootstrap/Alert'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport Navbar from 'react-bootstrap/Navbar'\nimport FormControl from 'react-bootstrap/FormControl'\n\nfunction Database(props) {\n\n  //Response from yeico appliance\n  const [responseString, setResponseString] = React.useState(\"\")\n\n  //Alerts\n  const [isValid, setIsValid] = useState(false);\n  const [isError, setIsError] = useState(false);\n\n  const inputRef = useRef < HTMLInputElement > (null);\n\n  function uploadFile(filename) {\n    console.log(\"Apoco si la envio asi na mas el nombre se envia?\")\n    console.log(filename[0])\n    api.stopApp(function (res) {\n      console.log(res)\n    }, props.device, \"nerves\", props.pass)\n    api.uploadFile(function (res) {\n      console.log(res)\n      if (res.result === \"ok\") {\n        setResponseString(`File Uploaded`)\n        setIsValid(true)\n        setTimeout(() => {\n          setIsValid(false)\n        }, 3000);\n      }\n      else {\n        setResponseString(`File Upload Fail`)\n        setIsError(true)\n        setTimeout(() => {\n          setIsError(false)\n        }, 3000);\n      }\n    }, props.device, \"nerves\", props.pass, filename[0])\n    api.startApp(function (res) {\n      console.log(res)\n    }, props.device, \"nerves\", props.pass)\n  }\n\n  function downloadFile() {\n    api.stopApp(function (res) {\n      console.log(res)\n    }, props.device, \"nerves\", props.pass)\n    api.downloadFile(props.device, \"nerves\", props.pass, props.mac)\n    api.startApp(function (res) {\n      console.log(res)\n    }, props.device, \"nerves\", props.pass)\n  }\n\n  function handleUpload(event) {\n    inputRef.current?.click()\n  }\n\n  return (\n    <Modal\n      {...props}\n      size=\"lg\"\n      backdrop=\"static\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">\n          Database\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Navbar >\n          <Navbar.Collapse as={Col} className=\"justify-content-center\">\n            <Form>\n              <Alert show={isValid} variant=\"success\">\n                {responseString}\n              </Alert>\n              <Alert show={isError} variant=\"danger\">\n                {responseString}\n              </Alert>\n              <FormControl type=\"file\" title=\" \" onChange={(e) => uploadFile(e.target.files)} />\n            </Form>\n            <label className=\"mx-3\">Choose file: </label>\n            <input ref={inputRef} className=\"d-none\" type=\"file\" />\n            <button onClick={handleUpload} className=\"btn btn-outline-primary\">\n              Upload\n            </button>\n          </Navbar.Collapse>\n        </Navbar>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"dark\" onClick={downloadFile}>Backup</Button>\n        <Button variant=\"dark\" onClick={props.onHide}>Close</Button>\n      </Modal.Footer>\n    </Modal >\n  );\n}\n\nexport default Database;"]},"metadata":{},"sourceType":"module"}