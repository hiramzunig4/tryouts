(this["webpackJsonplv-react-ui"]=this["webpackJsonplv-react-ui"]||[]).push([[0],{23:function(e,a,t){},36:function(e,a,t){e.exports=t(49)},42:function(e,a,t){},49:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(15),c=t.n(s),o=(t(41),t(42),t(7)),i=t(16),l=t(8),d=t(1);t(23);var m={setNetworkConfigDhcp:function(e,a){fetch("/net/setup/eth0",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){return a(e)}))},getNetworkConfig:function(e){fetch("/net/state/eth0").then((function(e){return e.json()})).then((function(a){return e(a)})).catch((function(a){return e(a)}))},getNetworkPing:function(e){fetch("/ping").then((function(e){return e.json()})).then((function(a){return e(a)})).catch((function(a){return e(a)}))},setNetworkConfigStatic:function(e,a){fetch("/net/setup/eth0",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){return a(e)}))},getNetworkDiscover:function(e){fetch("Discovery/2").then((function(e){return e.json()})).then((function(a){return e(a)})).catch((function(a){return e(a)}))}},u=t(33),g={validateIp:function(e){return 0===(e=e||"").trim().length?"IP cannot be empty":!1===/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)?"IP has invalid format":void 0}},f=function(e,a,t){e.errors[a]=t,e.count++},p=function(e,a,t){a=a||"";var n=g.validateIp(a);n&&f(e,t,n)},h={validateIpStructure:p,validateNetConfig:function(e){var a={count:0,errors:{},input:e};switch(e.method){case"dhcp":break;case"static":p(a,e.address,"address"),function(e,a,t){Number.isInteger(a)?[8,16,24].indexOf(a)<0&&f(e,t,"Invalida prefix length"):f(e,t,"Prefix length should be a number")}(a,e.prefix_length,"prefix_length"),p(a,e.gateway,"gateway"),0===a.count&&function(e,a,t,n){var r=a;new u.Netmask(t).contains(r)||f(e,n,"Invalid gateway segment")}(a,e.gateway,"".concat(e.address,"/").concat(e.prefix_length),"gateway"),function(e,a,t){[0,1,2].indexOf(a)<0&&f(e,t,"Invalid name servers length")}(a,e.name_servers.length,"nameservers_length"),e.name_servers.length>0&&p(a,e.name_servers[0],"dnsprimary"),e.name_servers.length>1&&p(a,e.name_servers[1],"dnssecondary");break;default:f(a,"method","invalid method")}return a}},y=t(11),v=t(13),b=t(6),E=t(31),k=t(35),w=t(14);var C=function(){var e=r.a.useState("radiodhcp"),a=Object(o.a)(e,2),t=a[0],s=a[1],c=r.a.useState(!0),i=Object(o.a)(c,2),u=i[0],g=i[1],f=r.a.useState(!1),p=Object(o.a)(f,2),C=p[0],S=p[1],O=Object(n.useState)({address:"",gateway:"",netmask:"255.255.255.0",dnsprimary:"",dnssecondary:""}),j=Object(o.a)(O,2),N=j[0],I=j[1],P=Object(n.useState)({address:"",gateway:"",netmask:"",dnsprimary:"",dnssecondary:""}),_=Object(o.a)(P,2),x=_[0],T=_[1],D=r.a.useState(!0),G=Object(o.a)(D,2),L=G[0],F=G[1],J=r.a.useState(!0),A=Object(o.a)(J,2),B=A[0],K=A[1],R=r.a.useState(!0),q=Object(o.a)(R,2),H=q[0],U=q[1],$=r.a.useState(!0),z=Object(o.a)($,2),M=z[0],W=z[1],Q=r.a.useState(!0),V=Object(o.a)(Q,2),X=V[0],Y=V[1],Z=r.a.useState(""),ee=Object(o.a)(Z,2),ae=ee[0],te=ee[1],ne=Object(n.useState)(!1),re=Object(o.a)(ne,2),se=re[0],ce=re[1],oe=Object(n.useState)(!1),ie=Object(o.a)(oe,2),le=ie[0],de=ie[1];function me(e){return!!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}function ue(e){F(e),K(e),U(e),W(e),Y(e)}function ge(e){return"".concat(JSON.stringify(e)).replace(/,/g,".").replace(/[[\]']/g,"")}function fe(e){"radiodhcp"===e.target.id?(g(!0),S(!1),ue(!0)):(g(!1),S(!0),ue(!1)),s(e.target.id),console.log(t)}var pe=function(e,a){I(Object(d.a)(Object(d.a)({},N),{},Object(l.a)({},e,a))),x[e]&&T(Object(d.a)(Object(d.a)({},x),{},Object(l.a)({},e,null)))},he=function(){var e=N.address,a=N.gateway,t=N.netmask,n=N.dnsprimary,r=N.dnssecondary,s={};return e&&me(e)||(s.address="IP has invalid format"),""===e&&(s.address="This field is required"),a&&""!==a&&me(a)||(s.gateway="IP has invalid format"),t&&""!==t&&me(t)||(s.netmask="IP has invalid format"),n&&(n&&me(n)||(s.dnsprimary="IP has invalid format")),r&&(r&&me(r)||(s.dnssecondary="IP has invalid format")),s};return r.a.createElement(b.a,null,r.a.createElement("h1",null,"NETWORK"),r.a.createElement(E.a,{show:se,variant:"success"},ae),r.a.createElement(E.a,{show:le,variant:"danger"},ae),r.a.createElement(b.a.Group,{as:v.a,className:"mb-3"},r.a.createElement(b.a.Label,{as:"legend",column:!0,sm:2}),r.a.createElement(y.a,{sm:3,align:"left"},r.a.createElement(b.a.Check,{type:"radio",label:"Obtain an IP address automatically",id:"radiodhcp",onChange:fe,checked:u}),r.a.createElement(b.a.Check,{type:"radio",label:"Use the following IP address:",id:"radiostatic",onChange:fe,checked:C}))),r.a.createElement(b.a.Group,{as:v.a,className:"mb-2"},r.a.createElement(b.a.Label,{align:"right",column:!0,sm:2},"IP Address"),r.a.createElement(y.a,{sm:8},r.a.createElement(b.a.Control,{placeholder:"IP Address",onChange:function(e){return pe("address",e.target.value)},isInvalid:!!x.address,disabled:L,value:N.address}),r.a.createElement(b.a.Control.Feedback,{type:"invalid"},x.address))),r.a.createElement(b.a.Group,{as:v.a,className:"mb-3"},r.a.createElement(b.a.Label,{align:"right",column:!0,sm:2},"Select Netmask"),r.a.createElement(y.a,{xs:2,align:"left"},r.a.createElement(b.a.Control,{as:"select",bsPrefix:"form-select",onChange:function(e){return pe("netmask",e.target.value)},isInvalid:!!x.netmask,disabled:H,value:N.netmask},r.a.createElement("option",{value:"255.255.255.0"},"255.255.255.0"),r.a.createElement("option",{value:"255.255.0.0"},"255.255.0.0"),r.a.createElement("option",{value:"255.0.0.0"},"255.0.0.0")),r.a.createElement(b.a.Control.Feedback,{type:"invalid"},x.netmask))),r.a.createElement(b.a.Group,{as:v.a,className:"mb-3"},r.a.createElement(b.a.Label,{align:"right",column:!0,sm:2},"Default Gateway"),r.a.createElement(y.a,{sm:8},r.a.createElement(b.a.Control,{placeholder:"Gateway",onChange:function(e){return pe("gateway",e.target.value)},isInvalid:!!x.gateway,disabled:B,value:N.gateway}),r.a.createElement(b.a.Control.Feedback,{type:"invalid"},x.gateway))),r.a.createElement(b.a.Group,{as:v.a,className:"mb-3"},r.a.createElement(b.a.Label,{align:"right",column:!0,sm:2},"Set DNS Servers:")),r.a.createElement(b.a.Group,{as:v.a,className:"mb-3"},r.a.createElement(b.a.Label,{align:"right",column:!0,sm:2},"Primary"),r.a.createElement(y.a,{sm:8},r.a.createElement(b.a.Control,{placeholder:"Primary DNS",onChange:function(e){return pe("dnsprimary",e.target.value)},isInvalid:!!x.dnsprimary,disabled:M,value:N.dnsprimary}),r.a.createElement(b.a.Control.Feedback,{type:"invalid"},x.dnsprimary))),r.a.createElement(b.a.Group,{as:v.a,className:"mb-3"},r.a.createElement(b.a.Label,{align:"right",column:!0,sm:2},"Secondary"),r.a.createElement(y.a,{sm:8},r.a.createElement(b.a.Control,{placeholder:"Secondary DNS",onChange:function(e){return pe("dnssecondary",e.target.value)},isInvalid:!!x.dnssecondary,disabled:X,value:N.dnssecondary}),r.a.createElement(b.a.Control.Feedback,{type:"invalid"},x.dnssecondary))),r.a.createElement(b.a.Group,null,r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement(k.a,{direction:"horizontal",gap:3},r.a.createElement(w.a,{onClick:function(){console.log("clicked in get config"),m.getNetworkConfig((function(e){if(console.log(e),"ok"===e.result){if("dhcp"===e.message.config.ipv4.method)s("radiodhcp"),N.address="",N.gateway="",N.dnsprimary="",N.dnssecondary="",g(!0),S(!1),ue(!0);else{s("radiostatic"),g(!1),S(!0),ue(!1);var a="";switch(e.message.config.ipv4.prefix_length){case 8:a="255.0.0.0";break;case 16:a="255.255.0.0";break;default:a="255.255.255.0"}N.address=ge(e.message.config.ipv4.address),N.gateway=ge(e.message.config.ipv4.gateway),N.netmask=a,0===e.message.config.ipv4.name_servers.length&&(N.dnsprimary="",N.dnssecondary=""),1===e.message.config.ipv4.name_servers.length&&(N.dnsprimary=ge(e.message.config.ipv4.name_servers[0]),N.dnssecondary=""),2===e.message.config.ipv4.name_servers.length&&(N.dnsprimary=ge(e.message.config.ipv4.name_servers[0]),N.dnssecondary=ge(e.message.config.ipv4.name_servers[1]))}te("Get Config Success"),T({address:"",gateway:"",netmask:"",dnsprimary:"",dnssecondary:""}),ce(!0),setTimeout((function(){ce(!1)}),3e3)}else te("Get Config Error"),T({address:"",gateway:"",netmask:"",dnsprimary:"",dnssecondary:""}),de(!0),setTimeout((function(){de(!1)}),3e3)}))}},"Get Config"),r.a.createElement(w.a,{onClick:function(e){if(e.preventDefault(),"radiostatic"===t){var a=he();if(Object.keys(a).length>0)T(a);else{console.log("\n          address: ".concat(N.address,"\n          gateway: ").concat(N.gateway,"\n          netmask: ").concat(N.netmask,"\n          server primary: ").concat(N.dnsprimary,"\n          server secondary: ").concat(N.dnssecondary,"\n        "));var n=N.netmask.match(/(\d+)/g),r=0;for(var s in n)r+=((n[s]>>>0).toString(2).match(/1/g)||[]).length;var c="",o=[];N.dnsprimary||N.dnssecondary||(c={method:"static",address:"".concat(N.address),prefix_length:r,gateway:"".concat(N.gateway),name_servers:[]}),N.dnsprimary&&!N.dnssecondary&&(o.push("".concat(N.dnsprimary)),c={method:"static",address:"".concat(N.address),prefix_length:r,gateway:"".concat(N.gateway),name_servers:["".concat(o[0])]}),!N.dnsprimary&&N.dnssecondary&&(o.push(""),o.push("".concat(N.dnssecondary)),c={method:"static",address:"".concat(N.address),prefix_length:r,gateway:"".concat(N.gateway),name_servers:["".concat(o[0]),"".concat(o[1])]}),N.dnsprimary&&N.dnssecondary&&(o.push("".concat(N.dnsprimary)),o.push("".concat(N.dnssecondary)),c={method:"static",address:"".concat(N.address),prefix_length:r,gateway:"".concat(N.gateway),name_servers:["".concat(o[0]),"".concat(o[1])]}),console.log(JSON.stringify(c));var i=h.validateNetConfig(c);if(i.count>0)switch("".concat(Object.keys(i.errors)[0])){case"adddress":T({address:Object.values(i.errors)[0]});break;case"gateway":T({gateway:Object.values(i.errors)[0]});break;case"netmask":T({netmask:Object.values(i.errors)[0]});break;case"dnsprimary":T({dnsprimary:Object.values(i.errors)[0]});break;case"dnssecondary":T({dnssecondary:Object.values(i.errors)[0]})}else m.setNetworkConfigStatic(i.input,(function(e){"ok"===e.result?(te("Set Static Config Succes"),ce(!0),setTimeout((function(){ce(!1)}),3e3)):(te("Set Static Config Error"),de(!0),setTimeout((function(){de(!1)}),3e3))}))}}else{console.log(t);var l=h.validateNetConfig({method:"dhcp"});l.count>0?(te("Error in config"),de(!0),setTimeout((function(){de(!1)}),3e3)):m.setNetworkConfigDhcp(l.input,(function(e){console.log(e),"ok"===e.result?(te("Set DHCP Config Succes"),ce(!0),setTimeout((function(){ce(!1)}),3e3)):(te("Set DHCP Config Error"),de(!0),setTimeout((function(){de(!1)}),3e3))}))}}},"Set Config"),r.a.createElement(w.a,{onClick:function(){console.log("clicked in Ping"),m.getNetworkPing((function(e){console.log("Respuesta del ping ".concat(JSON.stringify(e))),"ok"===e.result?(te("Ping Response Success"),ce(!0),setTimeout((function(){ce(!1)}),3e3)):(te("Ping Response Error"),de(!0),setTimeout((function(){de(!1)}),3e3))}))}},"Ping")))))};var S=function(){return r.a.createElement(b.a,null,r.a.createElement("h1",null,"DATABASE"),r.a.createElement(v.a,null,r.a.createElement(y.a,{xs:6,md:8},r.a.createElement(b.a.Label,{align:"left"},"Select folder to backup")),r.a.createElement(y.a,{xs:12,md:8},r.a.createElement(b.a.Control,{type:"file",onChange:function(e){return console.log(e.target.files)}})),r.a.createElement(y.a,{xs:12,md:8},r.a.createElement(y.a,null,r.a.createElement(w.a,null,"Backup")))))},O=t(20);var j=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{variant:"primary",onClick:function(){m.getNetworkDiscover((function(e){console.log(e)}))}},"Discovery"),r.a.createElement(O.a,{style:{width:"18rem"}},r.a.createElement(O.a.Img,{variant:"top",src:"holder.js/100px180"}),r.a.createElement(O.a.Body,null,r.a.createElement(O.a.Title,null,"Card Title"),r.a.createElement(O.a.Text,null,"Some quick example text to build on the card title and make up the bulk of the card's content."),r.a.createElement(w.a,{variant:"primary"},"Go somewhere"))))};var N=function(){var e=Object(n.useState)("utils"),a=Object(o.a)(e,2),t=a[0],s=a[1];return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{variant:"pills",activeKey:t,onSelect:function(e){console.log(e),s(e)}},r.a.createElement(i.a.Item,null,r.a.createElement(i.a.Link,{eventKey:"network"},"Network")),r.a.createElement(i.a.Item,null,r.a.createElement(i.a.Link,{eventKey:"database"},"Database")),r.a.createElement(i.a.Item,null,r.a.createElement(i.a.Link,{eventKey:"utils"},"Utils"))),function(e){switch(e){case"network":return r.a.createElement(C,null);case"database":return r.a.createElement(S,null);default:return r.a.createElement(j,null)}}(t))},I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,51)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,s=a.getLCP,c=a.getTTFB;t(e),n(e),r(e),s(e),c(e)}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),I()}},[[36,1,2]]]);
//# sourceMappingURL=main.3d326065.chunk.js.map